"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
/**
 * Computes pow(a, b) using exponentiation by squaring.
 *
 * *could add an additional base case for b = 1*
 *
 */

var _ebs__ = exports._ebs__ = function _ebs__(alloc, iszero, setone, iseven, div2, minus1) {

	var ebs = function ebs(a, ai, aj, b, bi, bj, c, ci, cj) {

		var t, u, m, n;

		if (iszero(b, bi, bj)) {
			setone(c, ci, cj);
		} else if (iseven(b, bi, bj)) {
			m = bj - bi;
			t = alloc(m);
			t = div2(b, bi, bj, t, 0, m);

			n = cj - ci;
			u = alloc(n);

			ebs(a, ai, aj, t, 0, m, u, 0, n);

			mul(u, 0, n, u, 0, n, c, ci, cj);
		} else {
			m = bj - bi;
			t = alloc(m);
			t = minus1(b, bi, bj, t, 0, m);

			n = cj - ci;
			u = alloc(n);

			ebs(a, ai, aj, t, 0, m, u, 0, n);

			mul(a, ai, aj, u, 0, n, c, ci, cj);
		}
	};
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy8wLWxlZ2FjeS9vdGhlcnMvcG93L2Vicy5qcyJdLCJuYW1lcyI6WyJfZWJzX18iLCJhbGxvYyIsImlzemVybyIsInNldG9uZSIsImlzZXZlbiIsImRpdjIiLCJtaW51czEiLCJlYnMiLCJhIiwiYWkiLCJhaiIsImIiLCJiaSIsImJqIiwiYyIsImNpIiwiY2oiLCJ0IiwidSIsIm0iLCJuIiwibXVsIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7O0FBT08sSUFBTUEsMEJBQVMsU0FBVEEsTUFBUyxDQUFVQyxLQUFWLEVBQWlCQyxNQUFqQixFQUF5QkMsTUFBekIsRUFBaUNDLE1BQWpDLEVBQXlDQyxJQUF6QyxFQUErQ0MsTUFBL0MsRUFBdUQ7O0FBRTVFLEtBQUlDLE1BQU0sU0FBTkEsR0FBTSxDQUFVQyxDQUFWLEVBQWFDLEVBQWIsRUFBaUJDLEVBQWpCLEVBQXFCQyxDQUFyQixFQUF3QkMsRUFBeEIsRUFBNEJDLEVBQTVCLEVBQWdDQyxDQUFoQyxFQUFtQ0MsRUFBbkMsRUFBdUNDLEVBQXZDLEVBQTJDOztBQUVwRCxNQUFJQyxDQUFKLEVBQU9DLENBQVAsRUFBVUMsQ0FBVixFQUFhQyxDQUFiOztBQUVBLE1BQUtsQixPQUFPUyxDQUFQLEVBQVVDLEVBQVYsRUFBY0MsRUFBZCxDQUFMLEVBQXlCO0FBQ3hCVixVQUFPVyxDQUFQLEVBQVVDLEVBQVYsRUFBY0MsRUFBZDtBQUNBLEdBRkQsTUFHSyxJQUFLWixPQUFPTyxDQUFQLEVBQVVDLEVBQVYsRUFBY0MsRUFBZCxDQUFMLEVBQXlCO0FBQzdCTSxPQUFJTixLQUFLRCxFQUFUO0FBQ0FLLE9BQUloQixNQUFNa0IsQ0FBTixDQUFKO0FBQ0FGLE9BQUlaLEtBQUtNLENBQUwsRUFBUUMsRUFBUixFQUFZQyxFQUFaLEVBQWdCSSxDQUFoQixFQUFtQixDQUFuQixFQUFzQkUsQ0FBdEIsQ0FBSjs7QUFFQUMsT0FBSUosS0FBS0QsRUFBVDtBQUNBRyxPQUFJakIsTUFBTW1CLENBQU4sQ0FBSjs7QUFFQWIsT0FBSUMsQ0FBSixFQUFPQyxFQUFQLEVBQVdDLEVBQVgsRUFBZU8sQ0FBZixFQUFrQixDQUFsQixFQUFxQkUsQ0FBckIsRUFBd0JELENBQXhCLEVBQTJCLENBQTNCLEVBQThCRSxDQUE5Qjs7QUFFQUMsT0FBSUgsQ0FBSixFQUFPLENBQVAsRUFBVUUsQ0FBVixFQUFhRixDQUFiLEVBQWdCLENBQWhCLEVBQW1CRSxDQUFuQixFQUFzQk4sQ0FBdEIsRUFBeUJDLEVBQXpCLEVBQTZCQyxFQUE3QjtBQUNBLEdBWEksTUFZRDtBQUNIRyxPQUFJTixLQUFLRCxFQUFUO0FBQ0FLLE9BQUloQixNQUFNa0IsQ0FBTixDQUFKO0FBQ0FGLE9BQUlYLE9BQU9LLENBQVAsRUFBVUMsRUFBVixFQUFjQyxFQUFkLEVBQWtCSSxDQUFsQixFQUFxQixDQUFyQixFQUF3QkUsQ0FBeEIsQ0FBSjs7QUFFQUMsT0FBSUosS0FBS0QsRUFBVDtBQUNBRyxPQUFJakIsTUFBTW1CLENBQU4sQ0FBSjs7QUFFQWIsT0FBSUMsQ0FBSixFQUFPQyxFQUFQLEVBQVdDLEVBQVgsRUFBZU8sQ0FBZixFQUFrQixDQUFsQixFQUFxQkUsQ0FBckIsRUFBd0JELENBQXhCLEVBQTJCLENBQTNCLEVBQThCRSxDQUE5Qjs7QUFFQUMsT0FBSWIsQ0FBSixFQUFPQyxFQUFQLEVBQVdDLEVBQVgsRUFBZVEsQ0FBZixFQUFrQixDQUFsQixFQUFxQkUsQ0FBckIsRUFBd0JOLENBQXhCLEVBQTJCQyxFQUEzQixFQUErQkMsRUFBL0I7QUFDQTtBQUNELEVBL0JEO0FBZ0NBLENBbENNIiwiZmlsZSI6ImVicy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHV0ZXMgcG93KGEsIGIpIHVzaW5nIGV4cG9uZW50aWF0aW9uIGJ5IHNxdWFyaW5nLlxuICpcbiAqICpjb3VsZCBhZGQgYW4gYWRkaXRpb25hbCBiYXNlIGNhc2UgZm9yIGIgPSAxKlxuICpcbiAqL1xuXG5leHBvcnQgY29uc3QgX2Vic19fID0gZnVuY3Rpb24gKGFsbG9jLCBpc3plcm8sIHNldG9uZSwgaXNldmVuLCBkaXYyLCBtaW51czEpIHtcblxuXHR2YXIgZWJzID0gZnVuY3Rpb24gKGEsIGFpLCBhaiwgYiwgYmksIGJqLCBjLCBjaSwgY2opIHtcblxuXHRcdHZhciB0LCB1LCBtLCBuO1xuXG5cdFx0aWYgKCBpc3plcm8oYiwgYmksIGJqKSApIHtcblx0XHRcdHNldG9uZShjLCBjaSwgY2opO1xuXHRcdH1cblx0XHRlbHNlIGlmICggaXNldmVuKGIsIGJpLCBiaikgKSB7XG5cdFx0XHRtID0gYmogLSBiaTtcblx0XHRcdHQgPSBhbGxvYyhtKTtcblx0XHRcdHQgPSBkaXYyKGIsIGJpLCBiaiwgdCwgMCwgbSk7XG5cblx0XHRcdG4gPSBjaiAtIGNpO1xuXHRcdFx0dSA9IGFsbG9jKG4pO1xuXG5cdFx0XHRlYnMoYSwgYWksIGFqLCB0LCAwLCBtLCB1LCAwLCBuKTtcblxuXHRcdFx0bXVsKHUsIDAsIG4sIHUsIDAsIG4sIGMsIGNpLCBjaik7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHRtID0gYmogLSBiaTtcblx0XHRcdHQgPSBhbGxvYyhtKTtcblx0XHRcdHQgPSBtaW51czEoYiwgYmksIGJqLCB0LCAwLCBtKTtcblxuXHRcdFx0biA9IGNqIC0gY2k7XG5cdFx0XHR1ID0gYWxsb2Mobik7XG5cblx0XHRcdGVicyhhLCBhaSwgYWosIHQsIDAsIG0sIHUsIDAsIG4pO1xuXG5cdFx0XHRtdWwoYSwgYWksIGFqLCB1LCAwLCBuLCBjLCBjaSwgY2opO1xuXHRcdH1cblx0fTtcbn07XG4iXX0=